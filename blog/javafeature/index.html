<!DOCTYPE html>
<html lang="zh-tw"><head>
  <meta charset="utf-8">
  <title>Ky&#39;s Blog</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Java Features學習記錄">
  <meta name="author" content="ky">
    
  
  <meta name="theme-name" content="liva-hugo" />
  
  <meta name="generator" content="Hugo 0.68.3" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://kuanyuce.github.io/plugins/bootstrap/bootstrap.min.css ">
  
  <link rel="stylesheet" href="https://kuanyuce.github.io/plugins/slick/slick.css ">
  
  <link rel="stylesheet" href="https://kuanyuce.github.io/plugins/themify-icons/themify-icons.css ">
  
  <link rel="stylesheet" href="https://kuanyuce.github.io/plugins/venobox/venobox.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://kuanyuce.github.io/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://kuanyuce.github.io/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="https://kuanyuce.github.io/images/favicon.png " type="image/x-icon">


<script async src="https://www.googletagmanager.com/gtag/js?id=G-JW5F1D6DVR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JW5F1D6DVR');
</script>

</head>
<body>
<!-- preloader start -->
<div class="preloader">
  
</div>
<!-- preloader end -->
<!-- navigation -->
<header class="navigation">
  <div class="container">
    
    <nav class="navbar navbar-expand-lg navbar-white bg-transparent border-bottom pl-0">
      <a class="navbar-brand mobile-view" href="https://kuanyuce.github.io/"><img class="img-fluid"
          src="https://kuanyuce.github.io/images/logo.ico" alt="Ky&#39;s Blog"></a>
      <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation">
        <i class="ti-menu"></i>
      </button>

      <div class="collapse navbar-collapse text-center" id="navigation">
        <div class="desktop-view">
          <ul class="navbar-nav mr-auto">
            
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/KuanYuCE"><i class="ti-github"></i></a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="https://www.linkedin.com/in/kuanyuchen-a8a63216b/?locale=en_US"><i class="ti-linkedin"></i></a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="https://www.cakeresume.com/kuan-yu-chen-301ac2"><i class="ti-id-badge"></i></a>
            </li>
            
          </ul>
        </div>

        <a class="navbar-brand mx-auto desktop-view" href="https://kuanyuce.github.io/"><img class="img-fluid"
            src="https://kuanyuce.github.io/images/logo.ico" alt="Ky&#39;s Blog"></a>

        <ul class="navbar-nav">
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://kuanyuce.github.io/">Home</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://kuanyuce.github.io/about/">About</a>
          </li>
          
          
        </ul>

        
        <!-- search -->
        <div class="search pl-lg-4">
          <button id="searchOpen" class="search-btn"><i class="ti-search"></i></button>
          <div class="search-wrapper">
            <form action="https://kuanyuce.github.io//search" class="h-100">
              <input class="search-box px-4" id="search-query" name="s" type="search" placeholder="Type & Hit Enter...">
            </form>
            <button id="searchClose" class="search-close"><i class="ti-close text-dark"></i></button>
          </div>
        </div>
        

        
      </div>
    </nav>
  </div>
</header>
<!-- /navigation -->

<section class="section-sm">
  <div class="container">
    <div class="row">
      <div class="col-lg-10 mx-auto">
        
        <a href="/categories/programming-language"
          class="text-primary">Programming language</a>
        
        <h2>Java好用的feature</h2>
        <div class="mb-3 post-meta">
          <span>By ky</span>
          
          <span class="border-bottom border-primary px-2 mx-1"></span>
          <span>27 January 2024</span>
          
        </div>
        
        <div class="content mb-5">
          <h2 id="java好用方法">Java好用方法</h2>
<ol>
<li>
<p>Method Reference (Java8)</p>
<ul>
<li>使用: 以雙冒號double colon(::)呈現</li>
<li>目的: 避免重複撰寫Lambda運算式, 同時能讓程式碼更為清楚</li>
<li>用法:
<ul>
<li>
<pre><code class="language-java=" data-lang="java=">  Arrays.sort(names, (name1, name2)-&gt;StringOrder.byLength(name1, name2));
        
  // 透過Method Reference改為
  Arrays.sort(names, StringOrder::byLength);
</code></pre></li>
</ul>
</li>
</ul>
</li>
<li>
<p>靜態方法of() (Java9)</p>
<ul>
<li>可以簡單看成建立List, Map, Set實例的便捷方法</li>
</ul>
<blockquote>
<p>Java9之後List/Set/Map接口裡面增加了一個靜態的方法of，可以給集合一次性地添加多個元素</p>
</blockquote>
<ul>
<li>使用時機： 當集合中儲存的元素個數已經確定了，不再改變時使用。</li>
<li>注意：
<ol>
<li>of方法只適用於List/Set/Map接口，不適用於接口的實現類</li>
<li>of方法的返回值是一個不能改變的集合，集合不能再使用add,put方法添加元素，否則會拋出異常</li>
<li>Set/Map接口在調用of方法的時候，不能有重覆的元素，否則會拋出異常</li>
</ol>
</li>
<li>用法: <code>static &lt;E&gt; List&lt;E&gt; of (E...elements)</code></li>
</ul>
</li>
<li>
<p>text block (Java15)</p>
<ul>
<li>原本text在java會以 <strong>+</strong> 和 <strong>\n</strong> 呈現, 但是在java15後可以用text block的方式呈現</li>
<li>用法:
<pre><code class="language-java=" data-lang="java=">String json = &quot;{\n&quot; +
        &quot;  \&quot;array\&quot;: [\n&quot; +
        &quot;    1,\n&quot; +
        &quot;    2,\n&quot; +
        &quot;    3\n&quot; +
        &quot;  ],\n&quot; +
        &quot;  \&quot;boolean\&quot;: true,\n&quot; +
        &quot;  \&quot;color\&quot;: \&quot;gold\&quot;,\n&quot; +
        &quot;  \&quot;null\&quot;: null,\n&quot; +
        &quot;  \&quot;number\&quot;: 123,\n&quot; +
        &quot;  \&quot;object\&quot;: {\n&quot; +
        &quot;    \&quot;a\&quot;: \&quot;b\&quot;,\n&quot; +
        &quot;    \&quot;c\&quot;: \&quot;d\&quot;\n&quot; +
        &quot;  },\n&quot; +
        &quot;  \&quot;string\&quot;: \&quot;Hello World\&quot;\n&quot; +
        &quot;}&quot;;

String json = &quot;&quot;&quot;
    {
    &quot;b1oolean&quot;: true,
    &quot;color&quot;: &quot;gold&quot;,
    &quot;number&quot;: 123,
    &quot;string&quot;: &quot;Hello World&quot;
    }
&quot;&quot;&quot;;
</code></pre></li>
</ul>
</li>
</ol>
<h2 id="data-type">Data type</h2>
<h3 id="lombok-vs-record-vs-pojo">lombok vs record vs pojo</h3>
<p>POJO/Lombok/Record的用法可參考<a href="https://klab.tw/2023/01/java-16-record-and-lombok-comparison/">此篇</a></p>
<p>值得注意的是record定義的資料載體可以透過<code>&lt;record&gt;::&lt;attribute&gt;</code>去拿到該record的值 (例如下面範例的Employee::age)</p>
<p>通常會和of()以及stream()一起使用</p>
<pre><code class="language-java=" data-lang="java=">public class Demo {
        public static void main(String[] args) {

            var employees = List.of(
                    new Employee(&quot;Justin&quot;, 39, Gender.MALE),
                    new Employee(&quot;Monica&quot;, 36, Gender.FEMALE),
                    new Employee(&quot;Irene&quot;, 6, Gender.FEMALE)
            );

            var sum = employees.stream()
                    .filter(employee -&gt; employee.gender() == Gender.MALE)
                    .mapToInt(Employee::age)
                    .sum();

            var average = employees.stream()
                    .filter(employee -&gt; employee.gender() == Gender.MALE)
                    .mapToInt(Employee::age)
                    .average()
                    .getAsDouble();

            var max = employees.stream()
                    .filter(employee -&gt; employee.gender() == Gender.MALE)
                    .mapToInt(Employee::age)
                    .max()
                    .getAsInt();

            List.of(sum, average, max).forEach(out::println);
        }
        
    enum Gender { FEMALE, MALE }

    record Employee(String name, Integer age, Gender gender) {}
}
</code></pre><h3 id="map-vs-maptoint">map vs mapToInt</h3>
<p>兩者返回的數據類型不同</p>
<ul>
<li>
<p>map返回Stream object</p>
<ul>
<li>就只是返回一個通用的stream類型, 可以繼續接map or reduce or filter..等 Stream&lt;T&gt;方法</li>
</ul>
</li>
<li>
<p>mapToInt返回IntStream</p>
<ul>
<li>IntStream提供了sum(), average(), max(), min()等方法</li>
</ul>
</li>
</ul>
<h3 id="record">Record</h3>
<p>大致說來，Kotlin中叫data class，Java中叫Record Class這個名稱不太一樣以外，其它的都是極為類似的。</p>
<p>我們用Java17中的Record Class 來重寫上述這個類，代碼是這樣的：</p>
<p><code>public record EmployeeDTO(String name,String idCard,int age){}</code>
是不是幾乎和Kotlin中的data class一模一樣呢?</p>
<p>是的，就是這麽回事，它簡化了數據類的定義。所以如果你非常厭煩Java數據類的重覆定義，與其去使用lombok這種侵入性非常強的第三方庫，還不如升級使用Java 17。更詳細的介紹可參考<a href="https://cloud.tencent.com/developer/article/2017497">此篇</a></p>
<h4 id="record-class需要關注的點">Record class需要關注的點</h4>
<p>關於record class，仍然有一些基本原則你需要知道。</p>
<ol>
<li>不能在record類的body中添加屬性，屬性只能定義在類的括號後面（稱為header）</li>
</ol>
<pre><code class="language-java=" data-lang="java=">public record EmployeeDTO(String name,String idCard,int age){
    //這是不允許的
    private String description;
}
</code></pre><ol start="2">
<li>可以在record類中添加靜態屬性與方法</li>
</ol>
<pre><code class="language-java=" data-lang="java=">public record EmployeeDTO(String name,String idCard,int age){
    //這是允許的
    private static System.Logger logger = System.getLogger(EmployeeDTO.class.getName());
}
</code></pre><ol start="3">
<li>可以添加額外的類方法，這是允許的</li>
</ol>
<pre><code class="language-java=" data-lang="java=">public record EmployeeDTO(String name,String idCard,int age){
    //這是允許的
    public String toJson(){
        //...
        return &quot;&quot;;
    }
}
</code></pre><p>比如，你可以添加一個方法，有時候我們需要將數據對象轉換為JSON來傳輸或存儲，那就添加一個toJson方法就好了.</p>
<ol start="4">
<li>可以覆蓋默認生成的一些東西</li>
</ol>
<pre><code class="language-java=" data-lang="java=">public record EmployeeDTO(String name,String idCard,int age){
    //這是允許的
    public int getAge(){
        return age;
    }
}
</code></pre><ol start="5">
<li>可以在方法中定義Local Record Classes</li>
</ol>
<p>在方法內部，你可以定義一個局部本地的record類</p>
<pre><code class="language-java=" data-lang="java=">public void calculateLocation(double x,double y){
    //定義一個本地record類
    record Point(double x, double y) {}

    var point = new Point(x,y);
    //...
    }
</code></pre><p>這個在一些局部方法中需要封裝一些參數時，又沒必要把這個類定義在外面時非常有用。</p>
<ol start="6">
<li>Java中的所有record類，默認都實現了Record接口</li>
</ol>
<pre><code class="language-java=" data-lang="java=">@Test
void testRecord(){
    record Point(double x,double y){}
    var point = new Point(0,0);
    // point實現了Record接口的
    Assertions.assertTrue(point instanceof Record);
}
</code></pre><h2 id="string">String</h2>
<p>Java的字串處理起來相對麻煩, 因為java不支援透過 <strong>[]</strong> 直接存取字串內的字元, 而且無法修改!</p>
<p>一定要轉換成char[]類型後才能修改</p>
<pre><code class="language-java=" data-lang="java=">        String s1 = &quot;This is a sample!&quot;;
        char c = s1.charAt(8);

        char[] chars = s1.toCharArray();
        chars[8] = 'n';
        String s2 = new String(chars);
        System.out.println(s2);   // 輸出This is n sample!
</code></pre><p>不能直接修改Java的字串, 要先用toCharArray轉換成Char[]類型的array才行, 改完後還要再轉換回String類型</p>
<p>另外, 雖然字串支援用 <strong>+</strong> 來串接字元, 但是不建議在for loop內使用, 可以改成用StringBuilder</p>
<pre><code class="language-java=" data-lang="java=">        StringBuilder sb = new StringBuilder();
        for (char c = 'a'; c &lt; 'f'; c++) {
            sb.append(c);
        }
        String result = sb.toString();
        System.out.println(result);
</code></pre><p>另外注意的是java會用單引號或雙引號來判斷文字是char or string的資料型態. (&lsquo;c'是char, &ldquo;c&quot;是String)</p>

        </div>

        
        
        <script src="https://utteranc.es/client.js"
        repo="kuanyuce/KuanYuCE.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
        </script>
      </div>
    </div>
  </div>
</section>



<script>
  var indexURL = "https://kuanyuce.github.io/index.json"
</script>

<!-- JS Plugins -->

<script src="https://kuanyuce.github.io/plugins/jQuery/jquery.min.js"></script>

<script src="https://kuanyuce.github.io/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://kuanyuce.github.io/plugins/slick/slick.min.js"></script>

<script src="https://kuanyuce.github.io/plugins/venobox/venobox.min.js"></script>

<script src="https://kuanyuce.github.io/plugins/search/fuse.min.js"></script>

<script src="https://kuanyuce.github.io/plugins/search/mark.js"></script>

<script src="https://kuanyuce.github.io/plugins/search/search.js"></script>

<!-- Main Script -->

<script src="https://kuanyuce.github.io/js/script.min.js"></script>




<script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.min.js"></script>
<div id="js-cookie-box" class="cookie-box cookie-box-hide">
	This site uses cookies. By continuing to use this website, you agree to their use. <span id="js-cookie-button" class="btn btn-sm btn-primary ml-2">I Accept</span>
</div>
<script>
	(function ($) {
		const cookieBox = document.getElementById('js-cookie-box');
		const cookieButton = document.getElementById('js-cookie-button');
		if (!Cookies.get('cookie-box')) {
			cookieBox.classList.remove('cookie-box-hide');
			cookieButton.onclick = function () {
				Cookies.set('cookie-box', true, {
					expires:  2 
				});
				cookieBox.classList.add('cookie-box-hide');
			};
		}
	})(jQuery);
</script>


<style>
.cookie-box {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  text-align: center;
  z-index: 9999;
  padding: 1rem 2rem;
  background: rgb(71, 71, 71);
  transition: all .75s cubic-bezier(.19, 1, .22, 1);
  color: #fdfdfd;
}

.cookie-box-hide {
  display: none;
}
</style>
</body>
</html>